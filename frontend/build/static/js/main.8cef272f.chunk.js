(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{107:function(e,t,s){e.exports={book_now_btn:"BookNow_book_now_btn__2o0to"}},133:function(e,t,s){e.exports={avatar:"AccessAndDescription_avatar__3rrI8"}},144:function(e,t,s){},148:function(e,t,s){},149:function(e,t,s){},150:function(e,t,s){},197:function(e,t,s){e.exports={"leaflet-container":"SearchMap_leaflet-container__1IC7b"}},200:function(e,t,s){"use strict";s.r(t);var c=s(4),n=s(36),a=s.n(n),r=(s(144),s(25)),o=s(12),i=s(30),l=s(0),j=s.n(l),b=s(5),d=s(127),m=d.a.initializeApp({apiKey:"AIzaSyAYZ94tcJHjzsWA9dZ_XDfq2-5N7fshBys",authDomain:"getting-started-react-19e7f.firebaseapp.com",databaseURL:"https://getting-started-react-19e7f-default-rtdb.europe-west1.firebasedatabase.app",projectId:"getting-started-react-19e7f",storageBucket:"getting-started-react-19e7f.appspot.com",messagingSenderId:"1057344622688",appId:"1:1057344622688:web:b49976a0434d2828633305"}).auth(),u=new d.a.auth.GoogleAuthProvider,x=function(){var e=Object(b.a)(j.a.mark((function e(){var t,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.signInWithPopup(u);case 3:return t=e.sent,s=t.user,e.next=7,fetch("/api/user/"+s.uid).then((function(e){if(200===e.status)return e.json()})).then((function(e){e.name||fetch("/api/add_user/",{method:"POST",body:JSON.stringify({uid:s.uid,name:s.displayName,authProvider:"google",email:s.email}),headers:new Headers({"content-type":"application/json"})}).then((function(e){return e.json()})).then((function(e){console.log(e)})).catch((function(e){alert("error: "+e)}))}));case 7:e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0),alert(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(b.a)(j.a.mark((function e(t,s){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.signInWithEmailAndPassword(t,s);case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0),alert(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,s){return e.apply(this,arguments)}}(),O=function(){var e=Object(b.a)(j.a.mark((function e(t,s,c){var n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.createUserWithEmailAndPassword(s,c);case 3:return n=e.sent,a=n.user,e.next=7,fetch("/api/add_user/",{method:"POST",body:JSON.stringify({uid:a.uid,name:t,authProvider:"local",email:s}),headers:new Headers({"content-type":"application/json"})}).then((function(e){return e.json()})).then((function(e){console.log(e)})).catch((function(e){alert("error: "+e)}));case 7:e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0),alert(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,s,c){return e.apply(this,arguments)}}(),f=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.sendPasswordResetEmail(t);case 3:alert("Password reset link sent!"),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0),alert(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){m.signOut()},p=s(50),v=s(1);var N=function(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),s=t[0],n=t[1],a=Object(c.useState)(""),l=Object(o.a)(a,2),j=l[0],b=l[1],d=Object(p.a)(m),u=Object(o.a)(d,3),O=u[0],f=u[1],g=u[2],N=Object(r.f)();return Object(c.useEffect)((function(){f||O&&N("/dashboard")}),[O,f,g,N]),Object(v.jsxs)("div",{className:"container",children:[Object(v.jsx)("h4",{className:"text-center my-5",children:"Login"}),Object(v.jsx)("div",{className:"row row-cols-1",children:Object(v.jsxs)("div",{className:"col-md-6 mx-auto",children:[Object(v.jsxs)("div",{className:"form-floating",children:[Object(v.jsx)("input",{type:"text",className:"form-control",value:s,id:"email",onChange:function(e){return n(e.target.value)},placeholder:"E-mail Address"}),Object(v.jsx)("label",{htmlFor:"email",children:"Email"})]}),Object(v.jsxs)("div",{className:"form-floating my-3",children:[Object(v.jsx)("input",{type:"password",className:"form-control",value:j,id:"password",onChange:function(e){return b(e.target.value)},placeholder:"Password"}),Object(v.jsx)("label",{htmlFor:"password",children:"Password"})]}),Object(v.jsx)("button",{className:"btn btn-outline-dark w-100 mb-3",onClick:function(){return h(s,j)},children:"Login"}),Object(v.jsx)("button",{className:"btn btn-primary w-100 mb-3",onClick:x,children:"Login with Google"}),Object(v.jsx)("div",{children:Object(v.jsx)(i.b,{to:"/reset",children:"Forgot Password"})}),Object(v.jsxs)("div",{children:["Don't have an account? ",Object(v.jsx)(i.b,{to:"/register",children:"Register"})," now."]})]})})]})};s(148);var w=function(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),s=t[0],n=t[1],a=Object(c.useState)(""),l=Object(o.a)(a,2),j=l[0],b=l[1],d=Object(c.useState)(""),u=Object(o.a)(d,2),h=u[0],f=u[1],g=Object(p.a)(m),N=Object(o.a)(g,3),w=N[0],y=N[1],_=N[2],k=Object(r.f)();return Object(c.useEffect)((function(){y||w&&k("/dashboard")}),[w,y,_,k]),Object(v.jsxs)("div",{className:"container",children:[Object(v.jsx)("h4",{className:"text-center my-5",children:"Register"}),Object(v.jsx)("div",{className:"row row-cols-1",children:Object(v.jsxs)("div",{className:"col-md-6 mx-auto",children:[Object(v.jsxs)("div",{className:"form-floating mb-3",children:[Object(v.jsx)("input",{type:"text",id:"name",className:"form-control",value:h,onChange:function(e){return f(e.target.value)},placeholder:"Full Name"}),Object(v.jsx)("label",{htmlFor:"name",children:"Name"})]}),Object(v.jsxs)("div",{className:"form-floating mb-3",children:[Object(v.jsx)("input",{type:"text",className:"form-control",id:"email",value:s,onChange:function(e){return n(e.target.value)},placeholder:"E-mail Address"}),Object(v.jsx)("label",{htmlFor:"email",children:"Email"})]}),Object(v.jsxs)("div",{className:"form-floating mb-3",children:[Object(v.jsx)("input",{type:"password",className:"form-control",id:"password",value:j,onChange:function(e){return b(e.target.value)},placeholder:"Password"}),Object(v.jsx)("label",{htmlFor:"password",children:"Password"})]}),Object(v.jsx)("button",{className:"btn btn-outline-dark w-100 mb-3",onClick:function(){h||alert("Please enter name"),O(h,s,j)},children:"Register"}),Object(v.jsx)("button",{className:"btn btn-primary w-100 mb-3",onClick:x,children:"Register with Google"}),Object(v.jsxs)("div",{children:["Already have an account? ",Object(v.jsx)(i.b,{to:"/login",children:"Login"})," now."]})]})})]})};s(149);var y=function(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),s=t[0],n=t[1],a=Object(p.a)(m),l=Object(o.a)(a,3),j=l[0],b=l[1],d=l[2],u=Object(r.f)();return Object(c.useEffect)((function(){b||j&&u("/dashboard")}),[j,b,d,u]),Object(v.jsxs)("div",{className:"container",children:[Object(v.jsx)("h4",{className:"text-center my-5",children:"Reset password"}),Object(v.jsx)("div",{className:"row row-cols-1",children:Object(v.jsxs)("div",{className:"col-md-6 mx-auto",children:[Object(v.jsxs)("div",{className:"form-floating mb-3",children:[Object(v.jsx)("input",{type:"text",className:"form-control",id:"email",value:s,onChange:function(e){return n(e.target.value)},placeholder:"E-mail Address"}),Object(v.jsx)("label",{htmlFor:"email",children:"Email"})]}),Object(v.jsx)("button",{className:"btn btn-secondary w-100",onClick:function(){return f(s)},children:"Send password reset email"}),Object(v.jsxs)("div",{children:["Don't have an account? ",Object(v.jsx)(i.b,{to:"/register",children:"Register"})," now."]})]})})]})};s(150);var _=function(){var e=Object(p.a)(m),t=Object(o.a)(e,3),s=t[0],n=t[1],a=t[2],i=Object(c.useState)(""),l=Object(o.a)(i,2),j=l[0],b=l[1],d=Object(c.useState)(""),u=Object(o.a)(d,2),x=u[0],h=u[1],O=Object(r.f)();return Object(c.useEffect)((function(){if(!n)return s?void fetch("/api/user/"+(null===s||void 0===s?void 0:s.uid)).then((function(e){if(200===e.status)return e.json()})).then((function(e){b(e.name),h(e.email)})).catch((function(e){alert("error: "+e)})):O("/")}),[s,n,a,O]),Object(v.jsx)("div",{className:"dashboard",children:Object(v.jsxs)("div",{className:"container",children:[Object(v.jsx)("h4",{className:"text-center",children:"Your Dashboard"}),"Logged in as",Object(v.jsx)("div",{children:j}),Object(v.jsx)("div",{children:x}),Object(v.jsx)("button",{className:"btn btn-outline-danger",onClick:g,children:"Logout"})]})})},k=s(54),C=s.n(k),S=s(64),D=s(51),F=s(48),B=Object(c.createContext)({bookings:[],totalBookings:0,addBooking:function(e){},country:"",setCountry:function(e){},totalCost:"",setTotalCost:function(e){},startDate:"",setStartDate:function(e){},endDate:"",setEndDate:function(e){},numOfNights:0,setNumOfNights:function(e,t){},guests:0,setGuests:function(e){},roomName:"",setRoomName:function(e){},roomImage:"",setRoomImage:function(e){},clearCurrentBooking:function(){}});function I(e){var t=Object(c.useState)([]),s=Object(o.a)(t,2),n=s[0],a=s[1],r=Object(c.useState)(""),i=Object(o.a)(r,2),l=i[0],j=i[1],b=Object(c.useState)(""),d=Object(o.a)(b,2),m=d[0],u=d[1],x=Object(c.useState)(""),h=Object(o.a)(x,2),O=h[0],f=h[1],g=Object(c.useState)(""),p=Object(o.a)(g,2),N=p[0],w=p[1],y=Object(c.useState)(""),_=Object(o.a)(y,2),k=_[0],C=_[1],S=Object(c.useState)(0),D=Object(o.a)(S,2),F=D[0],I=D[1],P=Object(c.useState)(0),E=Object(o.a)(P,2),T=E[0],A=E[1],R=Object(c.useState)(0),L=Object(o.a)(R,2),G=L[0],H=L[1];var z={bookings:n,totalBookings:n.length,addBooking:function(e){a((function(t){return t.concat(e)}))},country:l,setCountry:function(e){j(e)},startDate:N,setStartDate:function(e){w(e)},endDate:k,setEndDate:function(e){C(e)},numOfNights:F,setNumOfNights:function(e,t){I(Math.round((t-e)/864e5))},guests:G,setGuests:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;H(t?function(s){return s+e>=0&&s+e<=t?s+e:s+e>t?t:0}:function(t){return t+e>=0?t+e:0})},totalCost:T,setTotalCost:function(e){A(e*F)},roomName:m,setRoomName:function(e){u(e)},roomImage:O,setRoomImage:function(e){f(e)},clearCurrentBooking:function(){u(""),A(0),H(0),j(""),f(""),I(0),w(""),C("")}};return Object(v.jsx)(B.Provider,{value:z,children:e.children})}var P=B;function E(){var e=Object(c.useContext)(P),t=Object(r.f)();return Object(v.jsx)(S.a,{children:Object(v.jsx)(D.a,{md:6,className:"mx-auto mb-3",children:Object(v.jsx)("div",{className:"d-grid gap-2 px-3",children:Object(v.jsx)(F.a,{variant:"secondary",size:"lg",onClick:function(){t("search/"+e.country+"/")},children:"Search"})})})})}var T=s(130),A=s.n(T);s(151);function R(e){var t=Object(c.useContext)(P),s=Object(c.useState)(new Date),n=Object(o.a)(s,2),a=n[0],r=n[1],i=Object(c.forwardRef)((function(e,t){var s=e.value,c=e.onClick;return Object(v.jsx)("button",{className:"btn ",onClick:c,ref:t,children:s})}));return Object(c.useEffect)((function(){"start"===e.date?t.setStartDate(a):t.setEndDate(a),t.setNumOfNights(t.startDate,t.endDate)}),[t,e.date,a]),Object(v.jsx)(A.a,{selected:a,onChange:function(e){return r(e)},customInput:Object(v.jsx)(i,{})})}var L=s(135);function G(e){var t=Object(c.useContext)(P);return Object(v.jsx)("div",{className:"row ",children:Object(v.jsxs)("div",{className:"mx-auto mb-3 d-flex justify-content-center align-items-center",children:[Object(v.jsx)("button",{className:"btn btn-outline-secondary border border-3",onClick:function(){t.setGuests(1,e.maxGuests)},children:Object(v.jsx)("span",{className:"fs-4",children:"+"})}),Object(v.jsx)("button",{className:"btn btn-outline-secondary border border-3",onClick:function(){t.setGuests(-1)},children:Object(v.jsx)("span",{className:"fs-4",children:"-"})})]})})}function H(){var e=Object(c.useState)(!1),t=Object(o.a)(e,2),s=t[0],n=t[1],a=Object(c.useContext)(P);return Object(v.jsx)("div",{children:Object(v.jsxs)("div",{className:C.a.search_bar,children:[Object(v.jsxs)("div",{className:"d-md-flex justify-content-md-around ",children:[Object(v.jsxs)("div",{className:"col text-center "+C.a.search_bar_item,children:[Object(v.jsx)("strong",{className:"ms-2",children:Object(v.jsx)("small",{children:"Location"})}),Object(v.jsx)("br",{}),Object(v.jsx)("small",{className:"text-muted ms-2",children:"Which country?"}),Object(v.jsxs)(L.a,{"aria-label":"Default select example",className:"border-0 w-75 mx-auto bg-light",onChange:function(e){a.setCountry(e.target.value)},children:[Object(v.jsx)("option",{}),["Australia","Brazil","Canada","China","Hong Kong","Portugal","Spain","Turkey","United States"].map((function(e,t){return Object(v.jsx)("option",{value:e,children:e},t)}))]})]}),Object(v.jsxs)("div",{className:"text-center  col "+C.a.search_bar_item,children:[Object(v.jsx)("strong",{children:Object(v.jsx)("small",{children:"Check in"})}),Object(v.jsx)("br",{}),Object(v.jsx)("small",{className:"text-muted",children:"Add dates"}),Object(v.jsx)(R,{date:"start"})]}),Object(v.jsxs)("div",{className:"text-center col "+C.a.search_bar_item,children:[Object(v.jsx)("strong",{children:Object(v.jsx)("small",{children:"Check out"})}),Object(v.jsx)("br",{}),Object(v.jsx)("small",{className:"text-muted",children:"Add dates"}),Object(v.jsx)(R,{date:"end"})]}),Object(v.jsxs)("div",{className:"text-center col "+C.a.search_bar_item,children:[Object(v.jsxs)("span",{onClick:function(){n(!s)},children:[Object(v.jsx)("strong",{children:Object(v.jsx)("small",{children:"Guests"})}),Object(v.jsx)("br",{}),Object(v.jsx)("small",{className:"text-muted",children:"Add guests"}),Object(v.jsx)("br",{}),Object(v.jsxs)("small",{children:[a.guests," guests"]})]}),s&&Object(v.jsx)(G,{})]})]}),a.endDate<a.startDate&&Object(v.jsx)("p",{className:"text-center px-5",children:"check-out date must be > check-in date!"}),a.numOfNights>0&&a.country&&a.guests>0&&a.endDate>a.startDate&&Object(v.jsx)(E,{})]})})}function z(e){var t=e.room;return Object(v.jsxs)("p",{className:"small text-muted p-0 m-0 px-1",children:[t.accommodates," guest",t.accommodates>1?"s":"",",",t.bedrooms," bedroom",t.bedrooms>1?"s":"",",",t.beds," bed",t.beds>1?"s":"",",",t.bathrooms," bathroom",t.bathrooms>1?"s":"",","]})}function W(){return Object(v.jsx)("span",{className:"text-info",children:Object(v.jsx)(v.Fragment,{children:"\u2605"})})}function M(e){var t=new Intl.NumberFormat("en-US",{style:"currency",currency:"EUR"});return Object(v.jsx)(v.Fragment,{children:t.format(e.price)+" "})}function J(e){var t=Object(c.useContext)(P),s=e.room;return t.numOfNights>0?Object(v.jsx)("div",{children:Object(v.jsxs)("p",{className:"text-center bg-black text-light small pb-0 mb-0 mx-0",children:[Object(v.jsx)(M,{price:s.price*t.numOfNights}),"for your trip"]})}):""}function U(e){var t=e.room;return Object(v.jsx)("div",{className:"col mb-3 ",children:Object(v.jsx)(i.b,{className:"text-muted text-decoration-none",to:"/room/"+t._id,children:Object(v.jsxs)("div",{className:"card h-100 text-start "+C.a.room,children:[Object(v.jsx)(J,{room:t}),Object(v.jsx)("img",{className:"rounded-3",style:{height:"150px",width:"auto"},src:t.images.picture_url?t.images.picture_url:"https://source.unsplash.com/featured/500x500?hotel,room,"+t._id,alt:""}),Object(v.jsxs)("div",{className:"card-header bg-transparent border-0",children:[Object(v.jsx)("p",{className:"small",children:Object(v.jsxs)("strong",{children:[t.name.substring(0,20)+"..."," "]})}),Object(v.jsxs)("p",{className:"small text-center",children:[Object(v.jsx)(M,{price:t.price}),"/night"]})]}),Object(v.jsxs)("div",{className:"card-body p-0",children:[Object(v.jsx)(z,{room:t}),Object(v.jsxs)("p",{className:"small text-muted p-0 m-0 px-1",children:[Object(v.jsx)(W,{})," ",t.reviews.length," reviews"]})]})]})})},t._id)}var q=s(45),V=s(34),Y=s(56);function Z(e){return Object(v.jsxs)(V.a,{children:[e.text?Object(v.jsx)(Y.a,{children:e.text}):"",Object(v.jsx)(q.a,{as:V.a.Title,animation:"glow",children:Object(v.jsx)(q.a,{xs:12,size:"xl"})}),Object(v.jsxs)(V.a.Body,{children:[Object(v.jsx)(q.a,{as:V.a.Title,animation:"glow",children:Object(v.jsx)(q.a,{xs:6})}),Object(v.jsxs)(q.a,{as:V.a.Text,animation:"glow",children:[Object(v.jsx)(q.a,{xs:7})," ",Object(v.jsx)(q.a,{xs:4})," ",Object(v.jsx)(q.a,{xs:4})," ",Object(v.jsx)(q.a,{xs:6})," ",Object(v.jsx)(q.a,{xs:8})]}),Object(v.jsx)(q.a.Button,{variant:"primary",xs:6})]})]},e.id)}function K(){return Array.from({length:12}).map((function(e,t){return Object(v.jsx)(Z,{id:t},t)}))}function X(){var e=Object(c.useState)({}),t=Object(o.a)(e,2),s=t[0],n=t[1],a=Object(c.useState)(!0),r=Object(o.a)(a,2),i=r[0],l=r[1];return Object(c.useEffect)((function(){l(!0),fetch("/api/rooms/").then((function(e){return e.json()})).then((function(e){n(e.rooms),l(!1)})).catch((function(e){alert("error: "+e)}))}),[]),Object(v.jsxs)("div",{children:[Object(v.jsxs)("div",{className:"row border-top border-danger bg-black g-0 ",children:[Object(v.jsx)("div",{className:"order-last order-md-first",children:Object(v.jsx)(H,{})}),Object(v.jsxs)("div",{className:C.a.hero+" mt-3",children:[Object(v.jsx)("h4",{className:"mx-auto text-center",children:"React-Flask-Mongo example with authorization with Firebase."}),Object(v.jsx)("h3",{className:"mt-auto mx-auto",children:"Not sure where to go? Perfect."})]})]}),Object(v.jsx)("div",{className:"container mt-5",children:Object(v.jsx)("div",{className:"row row-cols-2 row-cols-md-3 row-cols-lg-4 row-cols-xl-5 g-3",children:i?Object(v.jsx)(K,{}):s.map((function(e){return Object(v.jsx)(U,{room:e},e._id)}))})})]})}function Q(e){return Object(v.jsxs)("span",{onClick:function(){document.getElementById("reviews").scrollIntoView(!0)},style:{cursor:"pointer"},children:[Object(v.jsx)(W,{}),Object(v.jsxs)("strong",{children:[" ",e.room.review_scores.review_scores_rating,"%"]}),Object(v.jsx)(v.Fragment,{children:"\xa0"}),"(",Object(v.jsxs)("span",{className:"text-decoration-underline text-muted",children:[e.room.reviews.length," reviews"]}),")"]})}function $(e){var t={backgroundSize:"cover",backgroundPosition:"center",width:"100%",height:"300px",backgroundImage:'url("'.concat(e.room.images.picture_url,'")')};return Object(v.jsxs)("div",{className:"row",children:[Object(v.jsxs)("p",{className:"lead fw-bold",children:[e.room.name,"  ",Object(v.jsx)(v.Fragment,{children:"\xa0"}),Object(v.jsx)(M,{price:e.room.price}),"/night",Object(v.jsxs)("span",{className:"float-end fw-light small",children:[Object(v.jsx)(v.Fragment,{children:"\u2665"}),"Save ",Object(v.jsx)(v.Fragment,{children:"\xa0"})]}),Object(v.jsxs)("span",{className:"float-end fw-light small",children:["Share ",Object(v.jsx)(v.Fragment,{children:"\xa0"})]})]}),Object(v.jsxs)("p",{className:"small p-o m-0",children:[Object(v.jsx)(Q,{room:e.room}),Object(v.jsx)(v.Fragment,{children:"\xa0"}),Object(v.jsx)(v.Fragment,{children:"\xa0"}),Object(v.jsx)("small",{className:"text-muted",children:e.room.host.host_location})]}),Object(v.jsx)("div",{className:"mt-3",style:t,children:Object(v.jsx)(J,{room:e.room})})]})}var ee=s(133),te=s.n(ee);function se(e){return Object(v.jsx)("div",{className:"row row-cols-2",children:e.amenities.map((function(e){return Object(v.jsxs)("div",{className:"col border border-1 p-2",children:[e," "]},e)}))})}function ce(e){return Object(v.jsxs)("div",{className:"row mt-3",children:[Object(v.jsx)("div",{className:"col-md-9",children:Object(v.jsxs)("p",{className:"lead fw-bold",children:[e.room.room_type," hosted by ",e.room.host.host_name," ",Object(v.jsx)("br",{})]})}),Object(v.jsx)("div",{className:"col-md-3",children:Object(v.jsx)("img",{className:te.a.avatar,src:e.room.host.host_thumbnail_url,alt:e.room.host.host_name})}),Object(v.jsx)(z,{room:e.room}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("hr",{}),Object(v.jsx)("p",{className:"small",children:e.room.summary}),Object(v.jsx)("hr",{}),Object(v.jsx)("p",{className:"lead fw-bold",children:"Where you'll sleep."}),Object(v.jsx)("img",{className:"img-thumbnail",src:e.room.images.picture_url,alt:""}),Object(v.jsx)("p",{children:e.room.bed_type}),Object(v.jsx)("hr",{}),Object(v.jsx)("p",{className:"lead fw-bold",children:"What this place offers"}),Object(v.jsx)(se,{amenities:e.room.amenities})]})]})}function ne(e){var t=e.review,s=new Date(t.date);return Object(v.jsxs)("p",{className:"border-bottom mb-3 p-3",children:[t.comments,Object(v.jsx)("br",{}),Object(v.jsxs)("span",{className:"text-muted fst-italic",children:["by ",t.reviewer_name," ",s.getFullYear(),"/",s.getMonth(),"/",s.getDay()]})]},t._id)}function ae(e){return Object(v.jsx)("div",{id:"reviews",children:e.reviews.map((function(e,t){return t<6?Object(v.jsx)(ne,{review:e},e._id):""}))})}var re=s(136);function oe(e){return Object(v.jsx)("div",{className:"col",children:Object(v.jsxs)("div",{className:"row d-flex align-items-center",children:[Object(v.jsx)("div",{className:"col small p-2",children:e.scoreName}),Object(v.jsx)("div",{className:"col",children:Object(v.jsx)(re.a,{variant:"black",style:{height:"5px"},now:10*parseInt(e.score)})}),Object(v.jsx)("div",{className:"col small",children:e.score})]})})}function ie(e){var t=e.room;return Object(v.jsxs)("section",{className:"my-5",children:[Object(v.jsxs)("p",{className:"lead fw-bold",children:[Object(v.jsx)(W,{})," ",t.review_scores.review_scores_rating,"% (",t.reviews.length," reviews)"]}),Object(v.jsxs)("div",{className:"row row-cols-md-2 row-cols-1",children:[Object(v.jsx)(oe,{scoreName:"Accuracy",score:t.review_scores.review_scores_accuracy}),Object(v.jsx)(oe,{scoreName:"Checkin",score:t.review_scores.review_scores_checkin}),Object(v.jsx)(oe,{scoreName:"Cleanliness",score:t.review_scores.review_scores_cleanliness}),Object(v.jsx)(oe,{scoreName:"Communication",score:t.review_scores.review_scores_communication}),Object(v.jsx)(oe,{scoreName:"Location",score:t.review_scores.review_scores_location}),Object(v.jsx)(oe,{scoreName:"Value",score:t.review_scores.review_scores_value})]})]})}var le=s(90);function je(e){var t=Object(c.useState)(!1),s=Object(o.a)(t,2),n=s[0],a=s[1];return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(F.a,{className:"bg-transparent text-primary",onClick:function(){return a(!0)},children:["Show all ",e.room.reviews.length," reviews"]}),Object(v.jsxs)(le.a,{size:"lg",show:n,onHide:function(){return a(!1)},animation:!0,scrollable:!0,children:[Object(v.jsx)(le.a.Header,{closeButton:!0,children:Object(v.jsx)(le.a.Title,{children:Object(v.jsx)(Q,{room:e.room})})}),Object(v.jsxs)(le.a.Body,{children:[Object(v.jsx)(ie,{room:e.room}),e.room.reviews.map((function(e){return Object(v.jsx)(ne,{review:e},e._id)}))]})]})]})}var be=s(68);function de(e){return Object(v.jsx)(v.Fragment,{children:e.date.toLocaleString().split(",")[0]+" "})}var me=s(107),ue=s.n(me);function xe(e){var t=e.room,s=Object(c.useContext)(P),n=""===s.country,a=Object(r.f)(),o=s.startDate<s.endDate;return Object(v.jsx)("div",{children:Object(v.jsxs)(V.a,{className:"border-0",children:[Object(v.jsxs)(V.a.Body,{children:[Object(v.jsxs)(V.a.Text,{children:[Object(v.jsx)("strong",{children:"Country: "}),t.address.country]}),Object(v.jsxs)(V.a.Text,{children:[Object(v.jsx)("strong",{children:"Room: "}),t.name]}),Object(v.jsxs)(V.a.Text,{children:[Object(v.jsx)("strong",{children:"Room per night: "}),Object(v.jsx)(M,{price:t.price})]}),Object(v.jsxs)(V.a.Text,{children:[Object(v.jsx)("strong",{children:"Guests: "}),s.guests,s.guests===t.accommodates&&Object(v.jsx)("span",{className:"mx-auto px-3 text-warning",children:"max"})]}),n?Object(v.jsx)(G,{maxGuests:t.accommodates}):"",Object(v.jsxs)(V.a.Text,{children:[Object(v.jsx)("strong",{children:"Nights: "}),o&&s.numOfNights]}),Object(v.jsx)("strong",{children:"Dates: "}),n?Object(v.jsxs)("div",{className:" p-1 bg-secondary text-light d-flex justify-content-center",children:[Object(v.jsxs)("div",{children:[Object(v.jsx)("span",{className:"ps-2",children:"Check-in"}),Object(v.jsx)(R,{date:"start"})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)("span",{className:"ps-2",children:"Check-out"}),Object(v.jsx)(R,{date:"end"})]})]}):Object(v.jsxs)("div",{children:[Object(v.jsx)(de,{date:s.startDate})," - ",Object(v.jsx)(de,{date:s.endDate})]}),!o&&Object(v.jsx)("span",{className:"fw-bold p-1 text-warning",children:"Check-in must be before check-out"}),Object(v.jsx)(V.a.Text,{children:Object(v.jsxs)("strong",{children:["Total cost: ",Object(v.jsx)(M,{price:o&&s.totalCost})," "]})})]}),Object(v.jsx)(V.a.Footer,{children:s.numOfNights>0&&s.guests>0&&o&&Object(v.jsx)(F.a,{onClick:function(){var c={country:s.country||t.address.country,totalCost:s.totalCost,startDate:s.startDate,endDate:s.endDate,numOfNights:s.numOfNights,guests:s.guests,roomName:s.roomName,roomImage:s.roomImage,bookedAt:new Date,roomId:t._id};s.addBooking(c),e.closeHandler(),s.clearCurrentBooking(),a("/my-bookings")},className:ue.a.book_now_btn+" w-100",children:"Book Now!"})})]})})}function he(e){var t=Object(c.useState)(!1),s=Object(o.a)(t,2),n=s[0],a=s[1],r=function(){return a(!1)};return Object(v.jsxs)("div",{className:"sticky-top",children:[Object(v.jsx)(F.a,{onClick:function(){return a(!0)},className:ue.a.book_now_btn,children:"Book Now!"}),Object(v.jsxs)(be.a,{show:n,onHide:r,placement:"end",children:[Object(v.jsx)(be.a.Header,{closeButton:!0,children:Object(v.jsx)(be.a.Title,{className:"bg-black text-light w-100 text-center p-3",children:"Booking details"})}),Object(v.jsx)(be.a.Body,{children:Object(v.jsx)(xe,{room:e.room,closeHandler:r})})]})]})}function Oe(){var e=Object(r.g)().roomId,t=Object(c.useState)({}),s=Object(o.a)(t,2),n=s[0],a=s[1],i=Object(c.useState)(!0),l=Object(o.a)(i,2),j=l[0],b=l[1],d=Object(c.useContext)(P);return Object(c.useEffect)((function(){b(!0),fetch("/api/get_room/"+e+"/").then((function(e){if(200===e.status)return e.json()})).then((function(e){a(e.room),b(!1),d.setRoomName(e.room.name),d.setRoomImage(e.room.images.picture_url),d.setTotalCost(e.room.price)})).catch((function(e){alert("error : "+e)}))}),[e]),j?Object(v.jsx)("div",{className:"container",children:Object(v.jsx)(Z,{text:"Loading room details..."})}):Object(v.jsxs)("div",{className:"container container-fluid",children:[Object(v.jsx)(he,{room:n}),Object(v.jsx)($,{room:n}),Object(v.jsx)(ce,{room:n}),Object(v.jsx)(ie,{room:n}),Object(v.jsx)(ae,{reviews:n.reviews}),n.reviews.length>6?Object(v.jsx)(je,{room:n}):""]})}function fe(){var e=Object(c.useState)(!0),t=Object(o.a)(e,2),s=t[0],n=t[1],a=Object(c.useState)([]),r=Object(o.a)(a,2),i=r[0],l=r[1],j=Object(c.useContext)(P);return Object(c.useEffect)((function(){n(!0),fetch("/api/search/",{method:"POST",body:JSON.stringify({country:j.country,guests:j.guests,nights:j.numOfNights}),headers:new Headers({"Content-Type":"application/json"})}).then((function(e){if(200===e.status)return e.json()})).then((function(e){n(!1),l(e.results)})).catch((function(e){alert("error : "+e)}))}),[j.country,j.guests,j.numOfNights]),s?Object(v.jsx)(Y.a,{children:Object(v.jsxs)(S.a,{className:"row row-cols-2 row-cols-md-3 row-cols-lg-4 row-cols-xl-5 g-3",children:[Object(v.jsx)(Z,{id:"placeholder",text:"Search results for "+j.country}),Object(v.jsx)(K,{})]})}):Object(v.jsxs)(Y.a,{children:[Object(v.jsxs)(D.a,{md:12,className:"p-3 bg-light sticky-top",children:["Search results for ",j.country,", ",j.numOfNights," nights, from ",Object(v.jsx)(de,{date:j.startDate}),"till ",Object(v.jsx)(de,{date:j.endDate}),", ",j.guests," guests."]}),Object(v.jsx)(S.a,{className:"row row-cols-2 row-cols-md-3 row-cols-lg-4 row-cols-xl-5 g-3",children:i.length?i.map((function(e){return Object(v.jsx)(U,{room:e},e._id)})):Object(v.jsx)("h1",{children:"No results"})})]})}var ge=s(91),pe=s(126);function ve(){var e=Object(p.a)(m),t=Object(o.a)(e,1)[0],s=Object(c.useContext)(P);return Object(v.jsx)(ge.a,{collapseOnSelect:!0,expand:"md",bg:"black",variant:"dark",children:Object(v.jsxs)(Y.a,{children:[Object(v.jsx)(ge.a.Brand,{children:Object(v.jsx)(i.b,{className:"mx-3 nav-link text-light fw-bold",to:"/",children:"Demo Airbnb"})}),Object(v.jsx)(ge.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(v.jsxs)(ge.a.Collapse,{id:"responsive-navbar-nav",children:[Object(v.jsxs)(pe.a,{className:"me-auto",children:[Object(v.jsx)(i.b,{className:"mx-3 nav-link text-light ",to:"/",children:"Places to stay"}),Object(v.jsx)(i.b,{className:"mx-3 nav-link text-light ",to:"/map",children:"Map"}),s.totalBookings?Object(v.jsxs)(i.b,{className:"mx-3 nav-link text-light ",to:"/my-bookings",children:["My bookings ",s.totalBookings]}):""]}),Object(v.jsx)(pe.a,{children:t?Object(v.jsx)(i.b,{className:"ms-auto mx-3 nav-link text-light fw-bold",to:"/dashboard",children:"Dashboard"}):Object(v.jsx)(i.b,{className:"ms-auto mx-3 nav-link text-light fw-bold",to:"/login",children:"Become a host"})})]})]})})}function Ne(){return Object(v.jsx)("div",{className:"row g-0 bg-black mt-5 px-5",children:Object(v.jsxs)("footer",{className:"d-flex flex-wrap justify-content-between align-items-center py-3 my-4 border-top",children:[Object(v.jsx)("p",{className:"col-md-4 mb-0 text-muted",children:"\xa9 2021 Demo App, Inc"}),Object(v.jsx)(i.b,{className:"col-md-4 d-flex align-items-center justify-content-center mb-3 mb-md-0 me-md-auto link-dark text-decoration-none",to:"/",children:"Demo App"}),Object(v.jsx)("ul",{className:"nav col-md-4 justify-content-end",children:Object(v.jsx)("li",{className:"nav-item",children:Object(v.jsx)(i.b,{to:"/",className:"nav-link px-2 text-muted",children:"Places to stay"})})})]})})}function we(e){return Object(v.jsxs)("div",{children:[Object(v.jsx)(ve,{}),Object(v.jsx)("main",{children:e.children}),Object(v.jsx)(Ne,{})]})}function ye(){var e=Object(c.useContext)(P);return Object(v.jsxs)(Y.a,{children:[Object(v.jsx)("h1",{className:"text-center",children:"My bookings"}),Object(v.jsx)(S.a,{children:e.bookings.map((function(e,t){return Object(v.jsx)(D.a,{sm:12,className:"shadow mb-3 p-3",children:Object(v.jsxs)(S.a,{children:[Object(v.jsxs)(D.a,{sm:3,children:[Object(v.jsx)("img",{className:"img-thumbnail border-0 shadow-lg",src:e.roomImage,alt:""}),Object(v.jsxs)("p",{className:"small text-center p-0 m-0",children:["Booked at: ",Object(v.jsx)("br",{})," ",Object(v.jsx)(de,{date:e.bookedAt})]})]}),Object(v.jsxs)(D.a,{sm:9,children:[Object(v.jsxs)("p",{className:"small p-0 m-0",children:["Country: ",e.country]}),Object(v.jsxs)("p",{className:"small p-0 m-0",children:["Room: ",e.roomName]}),Object(v.jsxs)("p",{className:"small p-0 m-0",children:["Dates:",Object(v.jsx)(de,{date:e.startDate}),"- ",Object(v.jsx)(de,{date:e.endDate})]}),Object(v.jsxs)("p",{className:"small p-0 m-0",children:["Num of nights: ",e.numOfNights]}),Object(v.jsxs)("p",{className:"small p-0 m-0",children:["Guests: ",e.guests]}),Object(v.jsxs)("p",{className:"small p-0 m-0",children:["Total Cost: ",Object(v.jsx)(M,{price:e.totalCost})]}),Object(v.jsx)("p",{className:"text-end",children:Object(v.jsx)(i.b,{to:"/room/"+e.roomId,children:"Room page"})})]})]})},t)}))})]})}var _e=s(209),ke=s(212),Ce=s(210),Se=s(211);s(197);function De(){var e=Object(c.useState)(!0),t=Object(o.a)(e,2),s=t[0],n=t[1],a=Object(c.useState)([]),r=Object(o.a)(a,2),i=r[0],l=r[1];return Object(c.useEffect)((function(){fetch("/api/rooms/?map=1").then((function(e){if(200===e.status)return e.json()})).then((function(e){l(e.rooms),n(!1)}),(function(e){console.log("error: "+e)}))}),[]),s?Object(v.jsxs)("div",{className:"container",children:[Object(v.jsx)("p",{className:"lead text-center",children:"Loading the map..."}),Object(v.jsx)(Z,{id:"index"},"index")]}):Object(v.jsx)("div",{className:"container bg-light container-fluid",children:Object(v.jsxs)("div",{className:"row  my-5",children:[Object(v.jsxs)("p",{className:"text-center lead",children:["Click on the marker to see the room details",Object(v.jsx)("br",{})," Displaying ",i.length," results."]}),Object(v.jsx)("div",{className:"col-12 col-lg-9 mx-lg-auto",children:Object(v.jsxs)(_e.a,{style:{height:400},center:[41.39,2.2],zoom:2,scrollWheelZoom:!1,children:[Object(v.jsx)(ke.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),i.map((function(e){return Object(v.jsx)(Ce.a,{position:[e.coordinates[1],e.coordinates[0]],children:Object(v.jsx)(Se.a,{children:Object(v.jsx)(U,{room:e},e._id)})},e._id)}))]})})]})})}var Fe=function(){return Object(v.jsx)(we,{children:Object(v.jsxs)(r.c,{children:[Object(v.jsx)(r.a,{path:"/api/index",element:Object(v.jsx)(X,{})}),Object(v.jsx)(r.a,{path:"/",element:Object(v.jsx)(X,{})}),Object(v.jsx)(r.a,{path:"/map",element:Object(v.jsx)(De,{})}),Object(v.jsx)(r.a,{path:"/login",element:Object(v.jsx)(N,{})}),Object(v.jsx)(r.a,{path:"/register",element:Object(v.jsx)(w,{})}),Object(v.jsx)(r.a,{path:"/reset",element:Object(v.jsx)(y,{})}),Object(v.jsx)(r.a,{path:"/dashboard",element:Object(v.jsx)(_,{})}),Object(v.jsx)(r.a,{path:"/my-bookings",element:Object(v.jsx)(ye,{})}),Object(v.jsx)(r.a,{path:"room/:roomId",element:Object(v.jsx)(Oe,{})}),Object(v.jsx)(r.a,{path:"search/:searchString",element:Object(v.jsx)(fe,{})})]})})},Be=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,213)).then((function(t){var s=t.getCLS,c=t.getFID,n=t.getFCP,a=t.getLCP,r=t.getTTFB;s(e),c(e),n(e),a(e),r(e)}))};s(198);a.a.render(Object(v.jsx)(I,{children:Object(v.jsx)(i.a,{children:Object(v.jsx)(Fe,{})})}),document.getElementById("root")),Be()},54:function(e,t,s){e.exports={room:"Front_room__tLdN1",hero:"Front_hero__3HTo0",search_bar:"Front_search_bar__3eqmV",search_bar_item:"Front_search_bar_item__2wESS",search_btn:"Front_search_btn__tqP4W"}}},[[200,1,2]]]);
//# sourceMappingURL=main.8cef272f.chunk.js.map