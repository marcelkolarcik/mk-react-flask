(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{49:function(e,t,n){},50:function(e,t,n){},54:function(e,t,n){e.exports={register:"Register_register__2SlbH",register__container:"Register_register__container__2Qh9m",register__textBox:"Register_register__textBox__3s4XI",register__btn:"Register_register__btn__252sT",register__google:"Register_register__google__1cWJh"}},55:function(e,t,n){e.exports={reset:"Reset_reset__CKdud",reset__container:"Reset_reset__container__1QPlj",reset__textBox:"Reset_reset__textBox__39ljD",reset__btn:"Reset_reset__btn__37c__"}},56:function(e,t,n){e.exports={dashboard:"Dashboard_dashboard__26x_u",dashboard__container:"Dashboard_dashboard__container__4w6d4",dashboard__btn:"Dashboard_dashboard__btn__a9dYb"}},58:function(e,t,n){"use strict";n.r(t);var r=n(14),s=n(44),a=n.n(s),c=(n(49),n(15)),i=(n(50),n(28)),o=n(18),l=n(0),d=n.n(l),j=n(3),b=n(42),u=b.a.initializeApp({apiKey:"AIzaSyAYZ94tcJHjzsWA9dZ_XDfq2-5N7fshBys",authDomain:"getting-started-react-19e7f.firebaseapp.com",databaseURL:"https://getting-started-react-19e7f-default-rtdb.europe-west1.firebasedatabase.app",projectId:"getting-started-react-19e7f",storageBucket:"getting-started-react-19e7f.appspot.com",messagingSenderId:"1057344622688",appId:"1:1057344622688:web:b49976a0434d2828633305"}).auth(),h=new b.a.auth.GoogleAuthProvider,m=function(){var e=Object(j.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.signInWithPopup(h);case 3:return t=e.sent,n=t.user,e.next=7,fetch("/api/user/"+n.uid).then((function(e){if(200===e.status)return e.json()})).then((function(e){e.name||fetch("/api/add_user/",{method:"POST",body:JSON.stringify({uid:n.uid,name:n.displayName,authProvider:"google",email:n.email}),headers:new Headers({"content-type":"application/json"})}).then((function(e){return e.json()})).then((function(e){console.log(e)})).catch((function(e){alert("error: "+e)}))}));case 7:e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0),alert(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(j.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.signInWithEmailAndPassword(t,n);case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0),alert(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,n){return e.apply(this,arguments)}}(),O=function(){var e=Object(j.a)(d.a.mark((function e(t,n,r){var s,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.createUserWithEmailAndPassword(n,r);case 3:return s=e.sent,a=s.user,e.next=7,fetch("/api/add_user/",{method:"POST",body:JSON.stringify({uid:a.uid,name:t,authProvider:"local",email:n}),headers:new Headers({"content-type":"application/json"})}).then((function(e){return e.json()})).then((function(e){console.log(e)})).catch((function(e){alert("error: "+e)}));case 7:e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0),alert(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n,r){return e.apply(this,arguments)}}(),f=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.sendPasswordResetEmail(t);case 3:alert("Password reset link sent!"),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0),alert(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),p=function(){u.signOut()},g=n(29),v=n(11);var _=function(){var e=Object(r.useState)(""),t=Object(c.a)(e,2),n=t[0],s=t[1],a=Object(r.useState)(""),l=Object(c.a)(a,2),d=l[0],j=l[1],b=Object(g.a)(u),h=Object(c.a)(b,3),O=h[0],f=h[1],p=h[2],_=Object(o.f)();return Object(r.useEffect)((function(){f||O&&_("/dashboard")}),[O,f,p]),Object(v.jsxs)("div",{className:"container",children:[Object(v.jsx)("h4",{className:"text-center my-5",children:"Login"}),Object(v.jsx)("div",{className:"row row-cols-1",children:Object(v.jsxs)("div",{className:"col-md-6 mx-auto",children:[Object(v.jsxs)("div",{className:"form-floating",children:[Object(v.jsx)("input",{type:"text",className:"form-control",value:n,id:"email",onChange:function(e){return s(e.target.value)},placeholder:"E-mail Address"}),Object(v.jsx)("label",{htmlFor:"email",children:"Email"})]}),Object(v.jsxs)("div",{className:"form-floating my-3",children:[Object(v.jsx)("input",{type:"password",className:"form-control",value:d,id:"password",onChange:function(e){return j(e.target.value)},placeholder:"Password"}),Object(v.jsx)("label",{htmlFor:"password",children:"Password"})]}),Object(v.jsx)("button",{className:"btn btn-outline-dark w-100 mb-3",onClick:function(){return x(n,d)},children:"Login"}),Object(v.jsx)("button",{className:"btn btn-primary w-100 mb-3",onClick:m,children:"Login with Google"}),Object(v.jsx)("div",{children:Object(v.jsx)(i.b,{to:"/reset",children:"Forgot Password"})}),Object(v.jsxs)("div",{children:["Don't have an account? ",Object(v.jsx)(i.b,{to:"/register",children:"Register"})," now."]})]})})]})};n(54);var w=function(){var e=Object(r.useState)(""),t=Object(c.a)(e,2),n=t[0],s=t[1],a=Object(r.useState)(""),l=Object(c.a)(a,2),d=l[0],j=l[1],b=Object(r.useState)(""),h=Object(c.a)(b,2),x=h[0],f=h[1],p=Object(g.a)(u),_=Object(c.a)(p,3),w=_[0],N=_[1],y=_[2],k=Object(o.f)();return Object(r.useEffect)((function(){N||w&&k("/dashboard")}),[w,N,y]),Object(v.jsxs)("div",{className:"container",children:[Object(v.jsx)("h4",{className:"text-center my-5",children:"Register"}),Object(v.jsx)("div",{className:"row row-cols-1",children:Object(v.jsxs)("div",{className:"col-md-6 mx-auto",children:[Object(v.jsxs)("div",{className:"form-floating mb-3",children:[Object(v.jsx)("input",{type:"text",id:"name",className:"form-control",value:x,onChange:function(e){return f(e.target.value)},placeholder:"Full Name"}),Object(v.jsx)("label",{htmlFor:"name",children:"Name"})]}),Object(v.jsxs)("div",{className:"form-floating mb-3",children:[Object(v.jsx)("input",{type:"text",className:"form-control",id:"email",value:n,onChange:function(e){return s(e.target.value)},placeholder:"E-mail Address"}),Object(v.jsx)("label",{htmlFor:"email",children:"Email"})]}),Object(v.jsxs)("div",{className:"form-floating mb-3",children:[Object(v.jsx)("input",{type:"password",className:"form-control",id:"password",value:d,onChange:function(e){return j(e.target.value)},placeholder:"Password"}),Object(v.jsx)("label",{htmlFor:"password",children:"Password"})]}),Object(v.jsx)("button",{className:"btn btn-outline-dark w-100 mb-3",onClick:function(){x||alert("Please enter name"),O(x,n,d)},children:"Register"}),Object(v.jsx)("button",{className:"btn btn-primary w-100 mb-3",onClick:m,children:"Register with Google"}),Object(v.jsxs)("div",{children:["Already have an account? ",Object(v.jsx)(i.b,{to:"/login",children:"Login"})," now."]})]})})]})};n(55);var N=function(){var e=Object(r.useState)(""),t=Object(c.a)(e,2),n=t[0],s=t[1],a=Object(g.a)(u),l=Object(c.a)(a,3),d=l[0],j=l[1],b=(l[2],Object(o.f)());return Object(r.useEffect)((function(){j||d&&b("/dashboard")}),[d,j]),Object(v.jsxs)("div",{className:"container",children:[Object(v.jsx)("h4",{className:"text-center my-5",children:"Reset password"}),Object(v.jsx)("div",{className:"row row-cols-1",children:Object(v.jsxs)("div",{className:"col-md-6 mx-auto",children:[Object(v.jsxs)("div",{className:"form-floating mb-3",children:[Object(v.jsx)("input",{type:"text",className:"form-control",id:"email",value:n,onChange:function(e){return s(e.target.value)},placeholder:"E-mail Address"}),Object(v.jsx)("label",{htmlFor:"email",children:"Email"})]}),Object(v.jsx)("button",{className:"btn btn-secondary w-100",onClick:function(){return f(n)},children:"Send password reset email"}),Object(v.jsxs)("div",{children:["Don't have an account? ",Object(v.jsx)(i.b,{to:"/register",children:"Register"})," now."]})]})})]})};n(56);var y=function(){var e=Object(g.a)(u),t=Object(c.a)(e,3),n=t[0],s=t[1],a=t[2],i=Object(r.useState)(""),l=Object(c.a)(i,2),d=l[0],j=l[1],b=Object(r.useState)(""),h=Object(c.a)(b,2),m=h[0],x=h[1],O=Object(o.f)();return Object(r.useEffect)((function(){if(!s)return n?void fetch("/api/user/"+(null===n||void 0===n?void 0:n.uid)).then((function(e){if(200===e.status)return e.json()})).then((function(e){j(e.name),x(e.email)})).catch((function(e){alert("error: "+e)})):O("/")}),[n,s,a]),Object(v.jsx)("div",{className:"dashboard",children:Object(v.jsxs)("div",{className:"container",children:[Object(v.jsx)("h4",{className:"text-center",children:"Your Dashboard"}),"Logged in as",Object(v.jsx)("div",{children:d}),Object(v.jsx)("div",{children:m}),Object(v.jsx)("button",{className:"btn btn-outline-danger",onClick:p,children:"Logout"})]})})};function k(){var e=Object(r.useState)({}),t=Object(c.a)(e,2),n=t[0],s=t[1],a=Object(r.useState)(!0),i=Object(c.a)(a,2),o=i[0],l=i[1];return Object(r.useEffect)((function(){l(!0),fetch("/api/rooms/").then((function(e){return e.json()})).then((function(e){s(e.rooms),l(!1)})).catch((function(e){alert("error: "+e)}))}),[]),o?Object(v.jsx)("h1",{children:"Loading rooms"}):Object(v.jsxs)("div",{className:"container",children:[Object(v.jsx)("h1",{children:"React-Flask-Mongo example with authorization with Firebase."}),Object(v.jsx)("div",{className:"row row-cols-2 row-cols-md-4 row cols-lg-5 g-3",children:n.map((function(e){return Object(v.jsx)("div",{className:"col mb-3 ",children:Object(v.jsxs)("div",{className:"card h-100",children:[Object(v.jsx)("img",{src:e.images.picture_url?e.images.picture_url:"https://source.unsplash.com/featured/500x500?hotel,room,"+e._id,alt:""}),Object(v.jsx)("div",{className:"card-header",children:Object(v.jsxs)("p",{className:"small",children:[Object(v.jsx)("strong",{children:"Name:"}),Object(v.jsx)("br",{}),e.name," ",Object(v.jsx)("br",{}),Object(v.jsxs)("strong",{children:[e.price," "]})]})}),Object(v.jsx)("div",{className:"card-body",children:Object(v.jsxs)("p",{className:"small text-start",children:[Object(v.jsx)("strong",{children:"Description:"}),Object(v.jsx)("br",{}),e.description.substring(0,100)+"..."]})}),Object(v.jsx)("div",{className:"card-footer",children:Object(v.jsxs)("p",{className:"small text-start",children:[Object(v.jsx)("strong",{children:"First review"})," ",Object(v.jsx)("br",{}),e.reviews.length?e.reviews[0].comments.substring(0,100)+"...":"no reviews"]})})]})},e._id)}))})]})}var P=function(){var e=Object(g.a)(u),t=Object(c.a)(e,1)[0];return Object(v.jsx)("div",{className:"App",children:Object(v.jsxs)(i.a,{children:[Object(v.jsxs)("div",{className:"d-flex justify-content-center bg-dark",children:[t?Object(v.jsx)(i.b,{className:"mx-3 nav-link text-muted",to:"/dashboard",children:"Dashboard"}):Object(v.jsx)(i.b,{className:"mx-3 nav-link text-muted",to:"/login",children:"Login"}),Object(v.jsx)(i.b,{className:"mx-3 nav-link text-muted",to:"/",children:"Home"})]}),Object(v.jsxs)(o.c,{children:[Object(v.jsx)(o.a,{path:"/api/index",element:Object(v.jsx)(k,{})}),Object(v.jsx)(o.a,{path:"/",element:Object(v.jsx)(k,{})}),Object(v.jsx)(o.a,{path:"/login",element:Object(v.jsx)(_,{})}),Object(v.jsx)(o.a,{path:"/register",element:Object(v.jsx)(w,{})}),Object(v.jsx)(o.a,{path:"/reset",element:Object(v.jsx)(N,{})}),Object(v.jsx)(o.a,{path:"/dashboard",element:Object(v.jsx)(y,{})})]})]})})},S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,59)).then((function(t){var n=t.getCLS,r=t.getFID,s=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),r(e),s(e),a(e),c(e)}))};n(57);a.a.render(Object(v.jsx)(P,{}),document.getElementById("root")),S()}},[[58,1,2]]]);
//# sourceMappingURL=main.ec03d80e.chunk.js.map